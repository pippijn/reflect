%{
// vim:noexpandtab
##include "yy/parse_interf.h"
##define scanner parse_context_scanner (context)
#define new(rule) $$ = pt_##rule##_new
%}

%define api.pure
%locations
%debug
%error-verbose
%expect 3
%glr-parser
%token-table

%parse-param { parse_context* context }
%lex-param { void* scanner }

%destructor { pt_node_unref ($$); } <>

#include "gen/tokens.y"
%%
#include "gen/rules-pp.y"

empty
	: /* empty */
	  { new (token) (&@$, "<empty>", 7, EOF); }
	;

translation_unit
	: external_definition
	  { new (fmt159) ($1); parse_context_unit_set (context, $$); }
	| translation_unit external_definition
	  { new (fmt160) ($1, $2); parse_context_unit_set (context, $$); }
	;
%%
